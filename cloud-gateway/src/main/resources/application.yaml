server:
  port: 8977

#jwt:
#  secret: turnMeOnturnMeOnturnMeOnturnMeOnturnMeOnturnMeOn

spring:
  application:
    name: cloud-gateway
  data:
    redis:
      host: 10.0.0.7 # Redis服务器地址
      database: 0 # Redis数据库索引（默认为0）
      port: 6379 # Redis服务器连接端口
      password: # Redis服务器连接密码（默认为空）
      timeout: 5000 # 连接超时时间（毫秒）
  datasource:
#    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: org.gjt.mm.mysql.Driver
    url: jdbc:mysql://10.0.0.7:3306/test?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: root
  cloud:
    nacos:
      discovery:
        server-addr: http://10.0.0.7:8848
        group: CloudDept
      config:
        server-addr: http://10.0.0.7:8848
        file-extension: yaml
        group: CloudDept
        import-check.enabled: false
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      routes:
        - id: dept-provider_route
          predicates:
            - Path=/portal/** # will be appended to uri
          uri: lb://dept-provider
          filters:
#            - AuthFilterFactory
#              args:
#                name: "auth"
#                order: 1
            - RewritePath=/portal/(?<segment>/?.*), /dept/$\{segment}

        - id: dept-consumer_route #payment_route    #路由的ID，没有固定规则但要求唯一，建议配合服务名
          #          uri: http://localhost:81          #匹配后提供服务的路由地址
          uri: lb://cloud-consumer-service #匹配后提供服务的路由地址
          filters:
#            - name: AuthFilterFactory
            - RewritePath=/portal/(?<segment>/?.*), /dept/$\{segment}
          predicates:
            - Path=/consumer/portal/**